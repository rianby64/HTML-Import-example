<html>
  <body>
    <div id="myid">
      This is a text to import
    </div>
    <div id="anid">
      Another else
    </div>
    <script>
      ;(_ => {
        'use strict';
        var ownerDoc = document.currentScript.ownerDocument;
        var adiv = ownerDoc.querySelector('div#anid');
        adiv.style.backgroundColor = "green";

        var link = document.createElement('link');
        link.href = "to-import-flat.html";
        link.rel = "import";

        ownerDoc.head.appendChild(link);
        link.addEventListener('load', (e) => {
          ownerDoc.body.appendChild(link.import.body);

          var link1 = document.createElement('link');
          link1.href = "nested/to-import-nested.html";
          link1.rel = "import";

          ownerDoc.head.appendChild(link1);
          link1.addEventListener('load', (e) => {
            ownerDoc.body.appendChild(link1.import.body);
          });
        });
      })();
    </script>
  </body>
  <head>
    <script src="to-import.js"></script>
  </head>
</html>
